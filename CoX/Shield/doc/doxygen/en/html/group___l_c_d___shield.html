<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>COX Shield: LCD Shield</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="coocox_logo.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">COX Shield
   &#160;<span id="projectnumber">V2.0.0</span>
   </div>
   <div id="projectbrief">API Reference</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.2 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group___l_c_d___shield.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#groups">Modules</a>  </div>
  <div class="headertitle">
<div class="title">LCD Shield</div>  </div>
<div class="ingroups"><a class="el" href="group___co_x___shield___lib.html">CoX Shield Library</a></div></div><!--header-->
<div class="contents">

<p>Character LCD control.  
<a href="#details">More...</a></p>
<div class="dynheader">
Collaboration diagram for LCD Shield:</div>
<div class="dyncontent">
<center><table><tr><td><img src="group___l_c_d___shield.png" border="0" alt="" usemap="#group______l__c__d______shield"/>
<map name="group______l__c__d______shield" id="group______l__c__d______shield">
<area shape="rect" id="node2" href="group___l_c_d___shield___exported___a_p_is.html" title="API Refrence of LCD Shield Driver." alt="" coords="310,5,458,30"/><area shape="rect" id="node4" href="group___keypad___exported___a_p_is.html" title="API Refrence of Keypad Driver." alt="" coords="321,54,447,79"/><area shape="rect" id="node3" href="group___co_x___shield___lib.html" title="CoX Shield Library" alt="" coords="5,30,128,55"/></map>
</td></tr></table></center>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="groups"></a>
Modules</h2></td></tr>
<tr class="memitem:group___keypad___exported___a_p_is"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___keypad___exported___a_p_is.html">Keypad Driver APIs</a></td></tr>
<tr class="memdesc:group___keypad___exported___a_p_is"><td class="mdescLeft">&#160;</td><td class="mdescRight">API Refrence of Keypad Driver. <br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group___l_c_d___shield___exported___a_p_is"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___l_c_d___shield___exported___a_p_is.html">LCD Shield Driver APIs</a></td></tr>
<tr class="memdesc:group___l_c_d___shield___exported___a_p_is"><td class="mdescLeft">&#160;</td><td class="mdescRight">API Refrence of LCD Shield Driver. <br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Character LCD control. </p>
<pre class="fragment">An HD44780 Character LCD is a de facto industry standard liquid crystal 
display (LCD) display device designed for interfacing with embedded systems.
These screens come in a variety of configurations including 8x1, which is 
one row of eight characters, 16x2,20¡Á2 and 20x4, some include backlight 
provided by a LED.

Any parallelly interfaced character LCD you get these days will have a 
Hitachi HD44780 chip or a different one compatible with the HD44780. These 
usually have 14 pins.

&lt;h1&gt;Contents&lt;/h1&gt;
- \ref HD44780_SCH
- \ref HD44780_Func_Desc
  - \ref HD44780_Func_Pin
  - \ref HD44780_Func_DDRAM
  - \ref HD44780_Func_Register
  - \ref HD44780_Func_BF
  - \ref HD44780_Func_AC
  - \ref HD44780_Func_Display
  - \ref HD44780_Func_Command
  .
- \ref HD44780_API_Group
  - \ref HD44780_API_Config
  - \ref HD44780_API_Display
  - \ref HD44780_API_Location
  - \ref HD44780_API_Cursor
  - \ref HD44780_API_Lowlayer
  .
- \ref HD44780_Usage
.

@section HD44780_SCH 1. HD44780 Schematic
&lt;img src="ldc1.gif" /&gt;

@section HD44780_Func_Desc 2. HD44780 Function Description
@subsection HD44780_Func_Pin 2.1 HD44780 Pin Description

@verbatim 
</pre><p> //! +-------------&mdash;+---------------------------------------------&mdash;+ //! |Pin Name |Pin Description | //! |-------------&mdash;|---------------------------------------------&mdash;| //! |D7 - D0 |Bi-directional data bus. | //! |-------------&mdash;|---------------------------------------------&mdash;| //! |R/W |Determines if we read from or write to the LCD | //! |-------------&mdash;|---------------------------------------------&mdash;| //! |RS |Register select | //! | |0: instruction register; 1: data register | //! |-------------&mdash;|---------------------------------------------&mdash;| //! |E |Enables or disables the LCD module. | //! +-------------&mdash;+---------------------------------------------&mdash;+ //!  </p>
<pre class="fragment">@subsection HD44780_Func_DDRAM 2.2 Display Data RAM (DDRAM)

Display data RAM (DDRAM) is where you send the characters (ASCII code) you
want to see on the LCD screen. It stores display data represented in 8-bit
character codes. Its capacity is 80 characters (bytes). Bonus: The area in
display data RAM (DDRAM) that is not used for display can be used as general
data RAM. DD RAM address is the position of the cursor (i.e. where the data
you sent will be displayed). Below you see DD RAM address layout of a 2*16
LCD.
&lt;img src="hd44780_ddramaddress.gif" /&gt;

@subsection HD44780_Func_Register 2.3 Registers

The HD44780 has two 8-bit registers, an instruction register (IR) and a data
register (DR). The IR stores instruction codes, such as display clear and 
cursor shift, and address information for display data RAM (DDRAM) and 
character generator RAM (CGRAM). The DR temporarily stores data to be 
written into DDRAM or CGRAM and temporarily stores data to be read from 
DDRAM or CGRAM. Data written into the DR is automatically written into DDRAM
or CGRAM by an internal operation. The DR is also used for data storage 
when reading data from DDRAM or CGRAM. These two registers can be selected
by the register selector (RS) signal. 

@verbatim 
</pre><p> //! +-&mdash;+-&mdash;+------------------------------------------------------&mdash;+ //! |RS |R/W |Operation | //! |-&mdash;|-&mdash;|------------------------------------------------------&mdash;| //! |0 |0 |R write as an internal operation (display clear, etc.) | //! |0 |1 |Read busy flag (DB7) and address counter (DB0 to DB6) | //! |1 |0 |DR write as an internal operation (DR to DDRAM or CGRAM) | //! |1 |1 |DR read as an internal operation (DDRAM or CGRAM to DR) | //! +-&mdash;+-&mdash;+------------------------------------------------------&mdash;+ //!  </p>
<pre class="fragment">@subsection HD44780_Func_BF 2.4 Busy Flag(BF)
When the busy flag is 1, the HD44780U is in the internal operation mode, 
and the next instruction will not be accepted. When RS = 0 and R/W = 1 
(see the table above), the busy flag is output to DB7 (MSB of LCD data bus).
The next instruction must be written after ensuring that the busy flag is 0.

@subsection HD44780_Func_AC 2.5 Address Counter (AC)

The address counter (AC) assigns addresses to both DDRAM and CGRAM. When 
a "set DD RAM/CG RAM address" instruction is written into the IR, the 
address information is sent from the IR to the AC. Selection of either 
DDRAM or CGRAM is also determined concurrently by the instruction. After 
writing into (or reading from) DDRAM or CGRAM, the AC is automatically 
incremented (or decremented) by 1 . The AC contents are output to DB0 to DB6
when RS = 0 and R/W = 1 (see the table above). To see the effects of setting
the address counter to increment or decrement.

@subsection HD44780_Func_Display 2.6 To display a character

positional data is written into IR (DDRAM address). A character code is then
written into DR and the LCD unit displays the corresponding pattern at the
specified location. The LCD unit can either increment or decrement the 
display position after each character entry, so that only successive 
character codes need to be entered to display a continuos character string.

@subsection HD44780_Func_Command 2.7 Commands
&lt;img src="hd44780_commands.gif" /&gt;

@section HD44780_API_Group 3. API Group
@subsection HD44780_API_Config 3.1 Config API
- HD44780Init() to initialize.
- HD44780EntryModeSet() to set the entry mode.
.

@subsection HD44780_API_Display 3.2 Display API
The display is turned on/off by:
- HD44780DisplayOn()
- HD44780DisplayOff()
.

The display is cleared by HD44780DisplayClear().

Print something on the LCD:
- HD44780DisplayString()
- HD44780DisplayN()
.

Shift the entire display by:
- HD44780DisplayLeftShift()
- HD44780DisplayRightShift()
.

@subsection HD44780_API_Location 3.3 Location API
- HD44780Home() - return (0,0)
- HD44780LocationSet() - move to (x, y)
.

@subsection HD44780_API_Cursor 3.4 Cursor API
Cursor is turned on/off:
- HD44780CursorOn() - set the cursor style and turn on the cursor.
- HD44780CursorOff()
.
Move the curosr:
- HD44780CursorLeftMove()
- HD44780CursorRightMove().
.

@subsection HD44780_API_Lowlayer 3.5 Lowlayer API
If the LCD API can not meet your need, you can use the API below operated 
on the lowlayer.
- HD44780Busy()
- HD44780WriteCmd()
- HD44780WriteData()
- HD44780ReadState()
- HD44780ReadData()
.

@section HD44780_Usage HD44780 Usage

Before Using the LCD driver, you should configure the LCD moudle, function,
character font, data interface length, pin remap. Please reference
\ref HD44780_Config.

Below is some example code:

@code 

void HD44780Test(void)
{
    int i , j;

    HD44780Init();

    //
    // Location Set &amp; Display string, number Test
    //
    HD44780LocationSet(0, 0);
    HD44780DisplayString("Hello HD44780!");
    HD44780LocationSet(0, 1);
    HD44780DisplayString("Number:");
    HD44780DisplayN(10086);
    xSysCtlDelay(xSysCtlClockGet() / 4);
    HD44780LocationSet(0,1);
    HD44780DisplayString("Display off/on");
    xSysCtlDelay(xSysCtlClockGet() / 4);
    HD44780DisplayOff();    
    xSysCtlDelay(xSysCtlClockGet() / 4 );
    HD44780DisplayOn();
    xSysCtlDelay(xSysCtlClockGet() / 4);
    //
    // Cursor style
    //
    HD44780DisplayClear();
    HD44780DisplayString("Cursor Test");
    HD44780CursorOn(xfalse);
    xSysCtlDelay(xSysCtlClockGet() / 4);
    HD44780CursorOff();
    xSysCtlDelay(xSysCtlClockGet() / 4);

    //
    // Cursor will blink at the end of line
    //
    HD44780CursorOn(xtrue);
    HD44780CursorRightMove(1);
    xSysCtlDelay(xSysCtlClockGet() / 4);
    HD44780CursorRightMove(5);
    xSysCtlDelay(xSysCtlClockGet() / 4);
    HD44780CursorLeftMove(4);
    xSysCtlDelay(xSysCtlClockGet() / 4);

    for(i = 0; i &lt; 10; i++)
    {
        HD44780CursorRightMove(1);
        xSysCtlDelay(xSysCtlClockGet() / 10);     
    }

    for(i = 0; i &lt; 10; i++)
    {
        HD44780CursorLeftMove(1);
        xSysCtlDelay(xSysCtlClockGet() / 10);     
    }    

    HD44780LocationSet(0, 1);
    HD44780DisplayString("Cursor Home");
    xSysCtlDelay(xSysCtlClockGet() / 4);

    HD44780Home();

    //
    // Display Right shift
    //
    HD44780DisplayClear();
    HD44780DisplayString("Right scrolling string");
    HD44780LocationSet(0, 1);
    HD44780DisplayString("        Line 2         ");
    for(i = 0; i &lt; 20; i++)
    {
        HD44780DisplayRightShift(1);
        xSysCtlDelay(xSysCtlClockGet() / 10);
    }

    //
    // Display Left shift
    //
    HD44780DisplayClear();
    HD44780DisplayString("Left scrolling string");
    HD44780LocationSet(0, 1);
    HD44780DisplayString("        Line 2         ");
    for(i = 0; i &lt; 20; i++)
    {
        HD44780DisplayLeftShift(1);
        xSysCtlDelay(xSysCtlClockGet() / 10);
    }

    //
    // Display Right Left shift    
    //
    HD44780DisplayClear();
    HD44780DisplayString("Left Right scrolling string");
    HD44780LocationSet(0, 1);
    HD44780DisplayString("        Line 2         ");    
    for(j = 0; j &lt; 2; j++)
    {  
        for(i = 0; i &lt; 10; i++)
        {
            HD44780DisplayRightShift(1);
            xSysCtlDelay(xSysCtlClockGet() / 10);
        }
        for(i = 0; i &lt; 10; i++)
        {
            HD44780DisplayLeftShift(1);
            xSysCtlDelay(xSysCtlClockGet() / 10);
        } 
    }
    HD44780Home();
    xSysCtlDelay(xSysCtlClockGet() / 4);

    //
    // Cursor Move Direction
    //
    HD44780DisplayClear();
    HD44780LocationSet(10, 1);
    xSysCtlDelay(xSysCtlClockGet() / 4);
    HD44780EntryModeSet(HD44780_MOVE_DIRECTION_DEC, xfalse);
    HD44780DisplayString("DEC");

    HD44780LocationSet(10, 2);
    xSysCtlDelay(xSysCtlClockGet() / 4);
    HD44780EntryModeSet(HD44780_MOVE_DIRECTION_DEC, xtrue);
    HD44780DisplayString("DEC shift");

    HD44780DisplayClear();
    HD44780LocationSet(10, 1);
    xSysCtlDelay(xSysCtlClockGet() / 4);
    HD44780EntryModeSet(HD44780_MOVE_DIRECTION_INC, xfalse);
    HD44780DisplayString("INC");

    HD44780LocationSet(10, 2);
    xSysCtlDelay(xSysCtlClockGet() / 4);
    HD44780EntryModeSet(HD44780_MOVE_DIRECTION_INC, xtrue);
    HD44780DisplayString("INC shift");
    xSysCtlDelay(xSysCtlClockGet() / 4);

    HD44780DisplayClear();
    HD44780EntryModeSet(HD44780_MOVE_DIRECTION_INC, xfalse);
    HD44780DisplayString("Complete");

}

\endcode  </pre> </div><!-- contents -->
</div><!-- doc-content -->
<hr>
<address>
  <small>
    &copy;&nbsp;2009-2011 by CooCox - 
    visit <a href="http://www.coocox.org/">http://www.coocox.org/</a>
  </small>
</address>
</body>
</html>
