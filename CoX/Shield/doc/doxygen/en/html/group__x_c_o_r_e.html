<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>COX Shield: xCORE</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="coocox_logo.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">COX Shield
   &#160;<span id="projectnumber">V2.0.0</span>
   </div>
   <div id="projectbrief">API Reference</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.2 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__x_c_o_r_e.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#groups">Modules</a> &#124;
<a href="#define-members">Macros</a>  </div>
  <div class="headertitle">
<div class="title">xCORE</div>  </div>
<div class="ingroups"><a class="el" href="group___co_x___peripheral___lib.html">CoX Peripheral Library</a></div></div><!--header-->
<div class="contents">

<p>ARM Cortex-M0/M3 Core peripheral (CPU, NVIC, Systick).  
<a href="#details">More...</a></p>
<div class="dynheader">
Collaboration diagram for xCORE:</div>
<div class="dyncontent">
<center><table><tr><td><img src="group__x_c_o_r_e.png" border="0" alt="" usemap="#group____x__c__o__r__e"/>
<map name="group____x__c__o__r__e" id="group____x__c__o__r__e">
<area shape="rect" id="node1" href="group___c_o_r_e___n_v_i_c___register.html" title="Here are the details info of NVIC registers." alt="" coords="313,5,413,30"/><area shape="rect" id="node4" href="group__x_c_o_r_e___exported___a_p_is.html" title="Cortex&#45;M0/M3 Core peripheral(CPU, NVIC, Systick) API reference." alt="" coords="321,54,404,79"/><area shape="rect" id="node3" href="group___co_x___peripheral___lib.html" title="CooCox CoX Peripheral Interface Library." alt="" coords="6,30,151,55"/></map>
</td></tr></table></center>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="groups"></a>
Modules</h2></td></tr>
<tr class="memitem:group__x_c_o_r_e___exported___a_p_is"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__x_c_o_r_e___exported___a_p_is.html">xCORE API</a></td></tr>
<tr class="memdesc:group__x_c_o_r_e___exported___a_p_is"><td class="mdescLeft">&#160;</td><td class="mdescRight">Cortex-M0/M3 Core peripheral(CPU, NVIC, Systick) API reference. <br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group___c_o_r_e___n_v_i_c___register"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___c_o_r_e___n_v_i_c___register.html">NVIC Register</a></td></tr>
<tr class="memdesc:group___c_o_r_e___n_v_i_c___register"><td class="mdescLeft">&#160;</td><td class="mdescRight">Here are the details info of NVIC registers. <br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ga9cda031e140ed983c401aa4a4cd64134"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__x_c_o_r_e.html#ga9cda031e140ed983c401aa4a4cd64134">xINT_PRIORITY_MASK</a></td></tr>
<tr class="memdesc:ga9cda031e140ed983c401aa4a4cd64134"><td class="mdescLeft">&#160;</td><td class="mdescRight">Macro to generate an interrupt priority mask based on the number of bits of priority supported by the hardware.  <a href="#ga9cda031e140ed983c401aa4a4cd64134"></a><br/></td></tr>
<tr class="separator:ga9cda031e140ed983c401aa4a4cd64134"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>ARM Cortex-M0/M3 Core peripheral (CPU, NVIC, Systick). </p>
<h1>Contents</h1>
<ul>
<li><a class="el" href="group__x_c_o_r_e.html#CORE_Blcok">1. CORE Physical Block</a></li>
<li><a class="el" href="group__x_c_o_r_e.html#CORE_Peripherals">2. Cortex -Mx Peripherals</a></li>
<li><a class="el" href="group__x_c_o_r_e.html#CORE_Function_Desc">3. CORE Functional Description</a><ul>
<li><a class="el" href="group__x_c_o_r_e.html#CORE_Spe_Reg_Control">3.1 CORE Special register access</a></li>
<li><a class="el" href="group__x_c_o_r_e.html#CORE_Int_Control">3.2 NVIC Control</a><ul>
<li><a class="el" href="group__x_c_o_r_e.html#CORE_Int_Enable">3.2.1 NVIC Interrupt Enable</a></li>
<li><a class="el" href="group__x_c_o_r_e.html#CORE_Int_Disable">3.2.2 NVIC Interrupt Disable</a></li>
<li><a class="el" href="group__x_c_o_r_e.html#CORE_Int_Pending">3.2.3 NVIC Interrupt Pending</a></li>
<li><a class="el" href="group__x_c_o_r_e.html#CORE_Int_Priority">3.2.4 NVIC Interrupt Priority</a></li>
</ul>
</li>
<li><a class="el" href="group__x_c_o_r_e.html#CORE_xSysTick_Control">3.3 SysTick Control</a></li>
</ul>
</li>
<li><a class="el" href="group__x_c_o_r_e.html#xCORE_API_Group">4. API Groups</a><ul>
<li><a class="el" href="group__x_c_o_r_e.html#xCORE_API_Group_Cpu">4.1 CPU instruction wrapping API</a></li>
<li><a class="el" href="group__x_c_o_r_e.html#xCORE_API_Group_Int">4.2 Interrupt API</a></li>
<li><a class="el" href="group__x_c_o_r_e.html#xCORE_API_Group_Systick">4.3 Systick API</a></li>
</ul>
</li>
<li><a class="el" href="group__x_c_o_r_e.html#CORE_Applications">5. CORE Applications</a></li>
</ul>
<h1><a class="anchor" id="CORE_Blcok"></a>
1. CORE Physical Block</h1>
<div class="image">
<img src="core_block.png" />
</div>
<h1><a class="anchor" id="CORE_Peripherals"></a>
2. Cortex -Mx Peripherals</h1>
<ul>
<li>SysTick</li>
<li>Provides a simple, 24-bit clear-on-write, decrementing, wrap-on-zero counter</li>
<li>with a flexible control mechanism.</li>
<li>Nested Vectored Interrupt Controller (NVIC)</li>
<li>Facilitates low-latency exception and interrupt handling</li>
<li>Controls power management</li>
<li>Implements system control registers</li>
<li>System Control Block (SCB)</li>
<li>Provides system implementation information and system control, including configuration, control,and reporting of system exceptions.</li>
<li>Memory Protection Unit (MPU)</li>
<li>Supports the standard ARMv7 Protected Memory System Architecture (PMSA) model. The MPU provides full support for protection regions, overlapping protection regions, access permissions,and exporting memory attributes to the system.</li>
</ul>
<h1><a class="anchor" id="CORE_Function_Desc"></a>
3. CORE Functional Description</h1>
<h2><a class="anchor" id="CORE_Spe_Reg_Control"></a>
3.1 CORE Special register access</h2>
<p>The core driver will access Special register As following:</p>
<ul>
<li><b>PRIMASK</b> </li>
<li><b>BASEPRI</b> </li>
<li><b>psp</b> </li>
<li><b>msp</b> </li>
</ul>
<h2><a class="anchor" id="CORE_Int_Control"></a>
3.2 NVIC Control</h2>
<h3><a class="anchor" id="CORE_Int_Enable"></a>
3.2.1 NVIC Interrupt Enable</h3>
<p>The specified interrupt is enabled in the interrupt controller. Other enables for the interrupt (such as at the peripheral level) are unaffected by this function.</p>
<h3><a class="anchor" id="CORE_Int_Disable"></a>
3.2.2 NVIC Interrupt Disable</h3>
<p>The specified interrupt is disabled in the interrupt controller. Other disables for the interrupt (such as at the peripheral level) are unaffected by this function.</p>
<h3><a class="anchor" id="CORE_Int_Pending"></a>
3.2.3 NVIC Interrupt Pending</h3>
<p>If the pend is set,The specified interrupt is pended in the interrupt controller. This will cause the interrupt controller to execute the corresponding interrupt handler at the next available time, based on the current interrupt state priorities. For example, if called by a higher priority interrupt handler, the specified interrupt handler will not be called until after the current interrupt handler has completed execution. The interrupt must have been enabled for it to be called.</p>
<p>If the pend is clear,The specified interrupt is unpended in the interrupt controller. This will cause any previously generated interrupts that have not been handled yet (due to higher priority interrupts or the interrupt no having been enabled yet) to be discarded.</p>
<h3><a class="anchor" id="CORE_Int_Priority"></a>
3.2.4 NVIC Interrupt Priority</h3>
<p>When multiple interrupts are asserted simultaneously, the ones with the highest priority are processed before the lower priority interrupts. Smaller numbers correspond to higher interrupt priorities; priority 0 is the highest interrupt priority.</p>
<p>The hardware priority mechanism will only look at the upper N bits of the priority level (where N is 2 for the NUC1xx family), so any prioritization must be performed in those bits. The remaining bits can be used to sub-prioritize the interrupt sources, and may be used by the hardware priority mechanism on a future part. This arrangement allows priorities to migrate to different NVIC implementations without changing the gross prioritization of the interrupts.</p>
<p>NVIC can also split between preemptable priority levels and subpriority levels in the interrupt priority specification. The range of the grouping values are dependent upon the hardware implementation; on the NUC1xx family, Cortex -M0 as it is ,do not support it.</p>
<h2><a class="anchor" id="CORE_xSysTick_Control"></a>
3.3 SysTick Control</h2>
<p>SysTick provides a simple, 24-bit clear-on-write, decrementing, wrap-on-zero counter with a flexible control mechanism. The counter can be used as a Real Time Operating System (RTOS) tick timer or as a simple counter.</p>
<p>When system timer is enabled, it will count down from the value in the SysTick Current Value Register (SYST_CVR) to zero, and reload (wrap) to the value in the SysTick Reload Value Register (SYST_RVR) on the next clock cycle, then decrement on subsequent clocks. When the counter transitions to zero, the COUNTFLAG status bit is set. The COUNTFLAG bit clears on reads.</p>
<h1><a class="anchor" id="xCORE_API_Group"></a>
4. API Groups</h1>
<p>The CoX Core API is broken into 3 groups of functions:</p>
<ul>
<li>those that wrapping CPU instruction.</li>
<li>those that deal with interrupts.</li>
<li>those that deal with systick.</li>
</ul>
<h2><a class="anchor" id="xCORE_API_Group_Cpu"></a>
4.1 CPU instruction wrapping API</h2>
<p>CPSID/CSPIE instruction:</p>
<ul>
<li><a class="el" href="group__x_c_o_r_e___exported___a_p_is.html#ga1a5703c5ddb5cf64c90497cc2d28e455" title="Wrapper function for the cpsid instruction.">xCPUcpsid()</a></li>
<li><a class="el" href="group__x_c_o_r_e___exported___a_p_is.html#ga95dded70ad74e7fba40a6c9a24b71d42" title="Wrapper function for the cpsie instruction.">xCPUcpsie()</a></li>
<li><a class="el" href="group__x_c_o_r_e___exported___a_p_is.html#ga4b475bd6657f7d6550be4416884f93f6" title="Wrapper function returning the state of primask (indicating whether interrupts are enabled or disable...">xCPUprimask()</a></li>
</ul>
<p>BASEPRI read/write with:</p>
<ul>
<li><a class="el" href="group__x_c_o_r_e___exported___a_p_is.html#gac8a70f8d489c8d713f3d0ad59d613fa5" title="Wrapper function for reading the basepri register.">xCPUbasepriGet()</a></li>
<li><a class="el" href="group__x_c_o_r_e___exported___a_p_is.html#ga80e26962a5495bd72c1212eb6a7847d7" title="Wrapper function for writing the BASEPRI register.">xCPUbasepriSet()</a></li>
</ul>
<p>WFI instruction:</p>
<ul>
<li><a class="el" href="group__x_c_o_r_e___exported___a_p_is.html#gad8f98cab80e0977a3d8b407f381c2dd8" title="Wrapper function for the wfi instruction.">xCPUwfi()</a></li>
</ul>
<p>PSP read/write with:</p>
<ul>
<li><a class="el" href="group__x_c_o_r_e___exported___a_p_is.html#ga662f752e8fb6f817df38f4c974c6adbf" title="Wrapper function for reading the psp register.">xCPUpspGet()</a></li>
<li><a class="el" href="group__x_c_o_r_e___exported___a_p_is.html#ga550bc7e7b4c487d4a5ed2da71a4cefec" title="Wrapper function for writing the psp register.">xCPUpspSet()</a></li>
</ul>
<p>MSP read/write with:</p>
<ul>
<li><a class="el" href="group__x_c_o_r_e___exported___a_p_is.html#gaaab5990f4daafe15947dcba7d0ba9e0c" title="Wrapper function for reading the msp register.">xCPUmspGet()</a></li>
<li><a class="el" href="group__x_c_o_r_e___exported___a_p_is.html#gab24d6e6c21f1922b114d4d380ae8e014" title="Wrapper function for writing the msp register.">xCPUmspSet()</a></li>
</ul>
<h2><a class="anchor" id="xCORE_API_Group_Int"></a>
4.2 Interrupt API</h2>
<p>Interrupt enable/disable by:</p>
<ul>
<li><a class="el" href="group__x_c_o_r_e___exported___a_p_is.html#gaf2b9c6f670192c4df5de28297355c2eb" title="Enables the processor interrupt.">xIntMasterEnable()</a>, <a class="el" href="group__x_c_o_r_e___exported___a_p_is.html#gae9a7fa12bf009d0ac3241de80c5df6bb" title="Disables the processor interrupt.">xIntMasterDisable()</a></li>
<li><a class="el" href="group__x_c_o_r_e___exported___a_p_is.html#ga1d1c076c748565e109f8abad14dda0bf" title="Enables an interrupt.">xIntEnable()</a>, <a class="el" href="group__x_c_o_r_e___exported___a_p_is.html#gaaa996a649e5b0a10ea9aed9bb6986d0c" title="Disables an interrupt.">xIntDisable()</a></li>
</ul>
<p>The interrupt priority is deal with:</p>
<ul>
<li><a class="el" href="group__x_c_o_r_e___exported___a_p_is.html#ga6261516c5ecfab1d196ec8a9ad567a76">xIntPriorityGroupingSet()</a>, <a class="el" href="group__x_c_o_r_e___exported___a_p_is.html#gaa60a02c11327a0f4d4309a990a075dc3">xIntPriorityGroupingGet()</a></li>
<li><a class="el" href="group__x_c_o_r_e___exported___a_p_is.html#ga67e58bc719157e441177569138db10d4" title="Sets the priority of an interrupt.">xIntPrioritySet()</a>, <a class="el" href="group__x_c_o_r_e___exported___a_p_is.html#ga782db464d706aee668d894fe51197078" title="Gets the priority of an interrupt.">xIntPriorityGet()</a></li>
<li><a class="el" href="group__x_c_o_r_e___exported___a_p_is.html#gaa8d1ed4449469fc9f6121d9ce93b91b1" title="Sets the priority masking level.">xIntPriorityMaskSet()</a>, <a class="el" href="group__x_c_o_r_e___exported___a_p_is.html#gaa543ffff28e0df6144ad18f18ecfe4d0" title="Gets the priority masking level.">xIntPriorityMaskGet()</a></li>
</ul>
<p>The interrupt can be pending with:</p>
<ul>
<li><a class="el" href="group__x_c_o_r_e___exported___a_p_is.html#gad7b028e054a41263b0945e46ea97415f" title="Pends an interrupt.">xIntPendSet()</a>, xIntPendClr()</li>
<li><a class="el" href="group__x_c_o_r_e___exported___a_p_is.html#gacce44dcb7c40a1db6a7a659a09c52811" title="Set the PendSV pending.">xPendSVPendSet()</a>, <a class="el" href="group__x_c_o_r_e___exported___a_p_is.html#gaf91839357a8afcf0506bcdb5ed23efad" title="Clear the PendSV pending.">xPendSVPendClr()</a></li>
<li><a class="el" href="group__x_c_o_r_e___exported___a_p_is.html#gac6696d2f02c752604fa93eb6d8c042d1" title="Set the SysTick pending.">xSysTickPendSet()</a>, <a class="el" href="group__x_c_o_r_e___exported___a_p_is.html#ga3d2e9ee4cd2ea291a1b2004e6c5c0167" title="Clear the SysTick pending.">xSysTickPendClr()</a></li>
</ul>
<h2><a class="anchor" id="xCORE_API_Group_Systick"></a>
4.3 Systick API</h2>
<p>The Systick is enable/disable with:</p>
<ul>
<li><a class="el" href="group__x_c_o_r_e___exported___a_p_is.html#ga9245e736441bf588b678d949836ee309" title="Enables the SysTick counter.">xSysTickEnable()</a></li>
<li><a class="el" href="group__x_c_o_r_e___exported___a_p_is.html#gac735bc501b0d98bc72e54c48b11abe6c" title="Disables the SysTick counter.">xSysTickDisable()</a></li>
</ul>
<p>The Systick interrupt is enable/disable with:</p>
<ul>
<li><a class="el" href="group__x_c_o_r_e___exported___a_p_is.html#ga451b1be33945001b444a794b5e768001" title="Enables the SysTick interrupt.">xSysTickIntEnable()</a></li>
<li><a class="el" href="group__x_c_o_r_e___exported___a_p_is.html#gae8928f8adf9da824ebb73cccbf967957" title="Disables the SysTick interrupt.">xSysTickIntDisable()</a></li>
</ul>
<p>The Systick is controled by:</p>
<ul>
<li><a class="el" href="group__x_c_o_r_e___exported___a_p_is.html#ga7e7913a5c7fffb4ea89409db5d404c8d" title="Sets the period of the SysTick counter.">xSysTickPeriodSet()</a></li>
<li><a class="el" href="group__x_c_o_r_e___exported___a_p_is.html#gaed9a3db4e07f5b776d0d928671175a14" title="Gets the period of the SysTick counter.">xSysTickPeriodGet()</a></li>
<li><a class="el" href="group__x_c_o_r_e___exported___a_p_is.html#ga1530cdab22f7897ec8d91b0e60fa7a0a" title="Gets the current value of the SysTick counter.">xSysTickValueGet()</a></li>
</ul>
<p><br/>
 <br/>
 </p>
<h1><a class="anchor" id="CORE_Applications"></a>
5. CORE Applications</h1>
<p>Add in the fulture... </p>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="ga9cda031e140ed983c401aa4a4cd64134"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define xINT_PRIORITY_MASK</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Macro to generate an interrupt priority mask based on the number of bits of priority supported by the hardware. </p>

<p>Definition at line <a class="el" href="xcore_8h_source.html#l00074">74</a> of file <a class="el" href="xcore_8h_source.html">xcore.h</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<hr>
<address>
  <small>
    &copy;&nbsp;2009-2011 by CooCox - 
    visit <a href="http://www.coocox.org/">http://www.coocox.org/</a>
  </small>
</address>
</body>
</html>
